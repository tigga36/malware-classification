#学習・テストデータ作成用

import json
import glob

Cnet_files = glob.glob("Cnet_strings\*\*")
FFRI_files = glob.glob("FFRI_strings\*\*")

path = 'Cnet_corpus.txt'
with open(path, 'r', encoding='utf-8') as f:
    Cnet_list = f.readlines()

path = 'FFRI_corpus.txt'
with open(path, 'r', encoding='utf-8') as f:
    FFRI_list = f.readlines()

corpus = Cnet_list + FFRI_list
corpus = [c.strip("\n") for c in corpus]

for file_path in Cnet_files:
    new_dic = {}
    with open(file_path, 'r', encoding='utf-8') as f:
        dic = json.load(f)
    string_list = dic["strings"]
    new_string_list = []
    for string in string_list:
        str_list = string.split(' ')
        for string in str_list:
            if string == '':
                continue
            if string in corpus:
                new_string_list.append(string)
    new_dic["strings"] = new_string_list
    path = 'new_Cnet_strings\\' + file_path[13:]
    with open(path, 'w', encoding='utf-8') as f:
        json.dump(new_dic, f, indent=4, ensure_ascii=False)

for file_path in FFRI_files:
    new_dic = {}
    with open(file_path, 'r', encoding='utf-8') as f:
        dic = json.load(f)
    string_list = dic["strings"]
    new_string_list = []
    for string in string_list:
        str_list = string.split(' ')
        for string in str_list:
            if string == '':
                continue
            if string in corpus:
                new_string_list.append(string)
    new_dic["strings"] = new_string_list
    path = 'new_FFRI_strings\\' + file_path[13:]
    with open(path, 'w', encoding='utf-8') as f:
        json.dump(new_dic, f, indent=4, ensure_ascii=False)
